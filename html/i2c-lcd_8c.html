<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Core/Src/i2c-lcd.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c6310732a22f63c0c2fc5595561e68f1.html">Core</a></li><li class="navelem"><a class="el" href="dir_b596f468b52957496e4f78b80e029268.html">Src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">i2c-lcd.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="i2c-lcd_8h_source.html">i2c-lcd.h</a>&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a16b338f4ba8614530cf7e484066f29c5"><td class="memItemLeft" align="right" valign="top"><a id="a16b338f4ba8614530cf7e484066f29c5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SLAVE_ADDRESS_LCD</b>&#160;&#160;&#160;0x4E</td></tr>
<tr class="separator:a16b338f4ba8614530cf7e484066f29c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0934da706080d3b0b3b2f04c9d044e67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c-lcd_8c.html#a0934da706080d3b0b3b2f04c9d044e67">lcd_send_cmd</a> (char cmd)</td></tr>
<tr class="separator:a0934da706080d3b0b3b2f04c9d044e67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6c9650fc3a35bf393a6bf535e6d0b9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c-lcd_8c.html#ac6c9650fc3a35bf393a6bf535e6d0b9f">lcd_send_data</a> (char data)</td></tr>
<tr class="separator:ac6c9650fc3a35bf393a6bf535e6d0b9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad235a86241458b1e7b8771688bfdaf9a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c-lcd_8c.html#ad235a86241458b1e7b8771688bfdaf9a">lcd_clear</a> (void)</td></tr>
<tr class="separator:ad235a86241458b1e7b8771688bfdaf9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a335c8a975c28b9eb7ee6c27a6efe7c44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c-lcd_8c.html#a335c8a975c28b9eb7ee6c27a6efe7c44">lcd_put_cur</a> (int row, int col)</td></tr>
<tr class="separator:a335c8a975c28b9eb7ee6c27a6efe7c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6842775ba83d166f02b8fef8bb63b1e6"><td class="memItemLeft" align="right" valign="top"><a id="a6842775ba83d166f02b8fef8bb63b1e6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>lcd_init</b> (void)</td></tr>
<tr class="separator:a6842775ba83d166f02b8fef8bb63b1e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a234ae1cb5d91fa756d1216e3540222ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c-lcd_8c.html#a234ae1cb5d91fa756d1216e3540222ad">lcd_send_string</a> (char *str)</td></tr>
<tr class="separator:a234ae1cb5d91fa756d1216e3540222ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa258e0eb52bbc34002a46dc2db89a84b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c-lcd_8c.html#aa258e0eb52bbc34002a46dc2db89a84b">HAL_I2C_MasterTxCpltCallback</a> (I2C_HandleTypeDef *hi2c)</td></tr>
<tr class="separator:aa258e0eb52bbc34002a46dc2db89a84b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af7b2c26e44dadaaa798a5c3d82914ba7"><td class="memItemLeft" align="right" valign="top">I2C_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c-lcd_8c.html#af7b2c26e44dadaaa798a5c3d82914ba7">hi2c1</a></td></tr>
<tr class="separator:af7b2c26e44dadaaa798a5c3d82914ba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b0454511d8d8d8dec74da7d0f7de4ac"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c-lcd_8c.html#a0b0454511d8d8d8dec74da7d0f7de4ac">data_to_sent</a> [32 *4] ={0}</td></tr>
<tr class="separator:a0b0454511d8d8d8dec74da7d0f7de4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e6927fa1486224044e568f9c370519b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c-lcd_8c.html#a1e6927fa1486224044e568f9c370519b">id</a></td></tr>
<tr class="separator:a1e6927fa1486224044e568f9c370519b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd><a href="https://controllerstech.com/i2c-lcd-in-stm32/">https://controllerstech.com/i2c-lcd-in-stm32/</a> </dd>
<dd>
Michał Pałka</dd></dl>
<p>In this file there is implementation of i2c-lcd library. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa258e0eb52bbc34002a46dc2db89a84b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa258e0eb52bbc34002a46dc2db89a84b">&#9670;&nbsp;</a></span>HAL_I2C_MasterTxCpltCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HAL_I2C_MasterTxCpltCallback </td>
          <td>(</td>
          <td class="paramtype">I2C_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>hi2c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>HAL_I2C_MasterTxCpltCallback is called when i2c transmission is completed and zeros Tx buffer. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hi2c</td><td>pointer to i2c handle structure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad235a86241458b1e7b8771688bfdaf9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad235a86241458b1e7b8771688bfdaf9a">&#9670;&nbsp;</a></span>lcd_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lcd_clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>lcd_clear sends commands to clear LCD display. It works in blocking mode but it sends only two command character (8 sign) so I decided not to change it. </p>

</div>
</div>
<a id="a335c8a975c28b9eb7ee6c27a6efe7c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a335c8a975c28b9eb7ee6c27a6efe7c44">&#9670;&nbsp;</a></span>lcd_put_cur()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lcd_put_cur </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>lcd_put_cur sends command to set cursor in given position on LCD. It works in blocking mode but it sends only one command character (4 sign) so I decided not to change it. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">row</td><td>row cursor position, range [0-1] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">col</td><td>column cursor position, range [0-15] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0934da706080d3b0b3b2f04c9d044e67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0934da706080d3b0b3b2f04c9d044e67">&#9670;&nbsp;</a></span>lcd_send_cmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lcd_send_cmd </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>lcd_send_cmd function sends character to 1602 LCS as a command. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>command char</td></tr>
  </table>
  </dd>
</dl>
<p>Unfortunately it works in blocking mode. However there is up to 8 signs (2 command characters) to sent via i2c in one time, so I decided not to change it. </p>

</div>
</div>
<a id="ac6c9650fc3a35bf393a6bf535e6d0b9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6c9650fc3a35bf393a6bf535e6d0b9f">&#9670;&nbsp;</a></span>lcd_send_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lcd_send_data </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>lcd_send_data in original implementation was sending single character (4 sign) via i2c in blocking mode. It was called in the loop for every character in the lcd_send_string, so it could take even 10 ms to send whole line to the display. It was unacceptable for me so now it adds data to i2c Tx buffer which is sending in non-blocking mode. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>data char which is adding to Tx buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a234ae1cb5d91fa756d1216e3540222ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a234ae1cb5d91fa756d1216e3540222ad">&#9670;&nbsp;</a></span>lcd_send_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lcd_send_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>lcd_send_string sends data to LCD in non blocking mode (in my implementation). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>pointer to sending data </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a0b0454511d8d8d8dec74da7d0f7de4ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b0454511d8d8d8dec74da7d0f7de4ac">&#9670;&nbsp;</a></span>data_to_sent</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char data_to_sent[32 *4] ={0}</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>i2c Tx buffer </p>

</div>
</div>
<a id="af7b2c26e44dadaaa798a5c3d82914ba7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7b2c26e44dadaaa798a5c3d82914ba7">&#9670;&nbsp;</a></span>hi2c1</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">I2C_HandleTypeDef hi2c1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>i2c handle structure for hi2c conected to LCD display </p>

</div>
</div>
<a id="a1e6927fa1486224044e568f9c370519b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e6927fa1486224044e568f9c370519b">&#9670;&nbsp;</a></span>id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t id</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>counter of sending message characters. It increments after every 4 sign added to Tx buffer, and zeros when all characters are added </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
