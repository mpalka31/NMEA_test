\hypertarget{uart-comport_8c}{}\doxysection{Core/\+Src/uart-\/comport.c File Reference}
\label{uart-comport_8c}\index{Core/Src/uart-\/comport.c@{Core/Src/uart-\/comport.c}}
{\ttfamily \#include \char`\"{}uart-\/comport.\+h\char`\"{}}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{uart-comport_8c_a06e8775f4b31c0beeaf37a00c27e28c4}\label{uart-comport_8c_a06e8775f4b31c0beeaf37a00c27e28c4}} 
\#define {\bfseries COM\+\_\+\+LEN}~9
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{uart-comport_8c_aa64339de791f4671140e0dab07219156}{uatr\+\_\+comport\+\_\+comunication\+\_\+init}} (UART\+\_\+\+Handle\+Type\+Def $\ast$huart)
\item 
void \mbox{\hyperlink{uart-comport_8c_a095104a7832f1ee7897ecab94c3b0256}{uatr\+\_\+comport\+\_\+read\+\_\+data}} ()
\item 
void \mbox{\hyperlink{uart-comport_8c_a2cc441e72458643cd3d0d193f84277f3}{uatr\+\_\+comport\+\_\+send\+\_\+data}} (uint8\+\_\+t $\ast$data, uint8\+\_\+t data\+\_\+len)
\item 
void \mbox{\hyperlink{uart-comport_8c_a57e6636d5b06b085ccd24ab3857e6b19}{uart\+\_\+comport\+\_\+task}} (void($\ast$\mbox{\hyperlink{main_8c_acbfb668d7b4cfa39aa1a5a5dac3c0e7e}{task}})(void))
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static uint8\+\_\+t \mbox{\hyperlink{uart-comport_8c_a1e883f39d56bb3dd769123f2b951e50d}{comand\+\_\+\+RX}} \mbox{[}COM\+\_\+\+LEN\mbox{]} =\{0\}
\item 
static bool \mbox{\hyperlink{uart-comport_8c_a6b4bce936c510120447c9171f10a8b0f}{DAV\+\_\+flag}} = false
\item 
uint8\+\_\+t \mbox{\hyperlink{uart-comport_8c_af2e9ae4c4e3d4330f1ba90f690c1b6df}{uart\+\_\+\+Tx\+\_\+flag}} = 0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyAuthor}{Author}
Michał Pałka
\end{DoxyAuthor}
Implementation of uart-\/comport communication driver. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{uart-comport_8c_a57e6636d5b06b085ccd24ab3857e6b19}\label{uart-comport_8c_a57e6636d5b06b085ccd24ab3857e6b19}} 
\index{uart-\/comport.c@{uart-\/comport.c}!uart\_comport\_task@{uart\_comport\_task}}
\index{uart\_comport\_task@{uart\_comport\_task}!uart-\/comport.c@{uart-\/comport.c}}
\doxysubsubsection{\texorpdfstring{uart\_comport\_task()}{uart\_comport\_task()}}
{\footnotesize\ttfamily void uart\+\_\+comport\+\_\+task (\begin{DoxyParamCaption}\item[{void($\ast$)(void)}]{task }\end{DoxyParamCaption})}

uart\+\_\+comport\+\_\+task is a function that should be placed inside main infinitive loop. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em task} & is a function pointer to a function which shoud be triggered to handle message. It is implemented in the \char`\"{}main.\+c\char`\"{} file. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{uart-comport_8c_aa64339de791f4671140e0dab07219156}\label{uart-comport_8c_aa64339de791f4671140e0dab07219156}} 
\index{uart-\/comport.c@{uart-\/comport.c}!uatr\_comport\_comunication\_init@{uatr\_comport\_comunication\_init}}
\index{uatr\_comport\_comunication\_init@{uatr\_comport\_comunication\_init}!uart-\/comport.c@{uart-\/comport.c}}
\doxysubsubsection{\texorpdfstring{uatr\_comport\_comunication\_init()}{uatr\_comport\_comunication\_init()}}
{\footnotesize\ttfamily void uatr\+\_\+comport\+\_\+comunication\+\_\+init (\begin{DoxyParamCaption}\item[{UART\+\_\+\+Handle\+Type\+Def $\ast$}]{huart }\end{DoxyParamCaption})}

uatr\+\_\+comport\+\_\+comunication\+\_\+init is a function to initialize connection 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em huart} & is a pointer to UART\+\_\+\+Handle\+Type\+Def used to communicate with comport. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{uart-comport_8c_a095104a7832f1ee7897ecab94c3b0256}\label{uart-comport_8c_a095104a7832f1ee7897ecab94c3b0256}} 
\index{uart-\/comport.c@{uart-\/comport.c}!uatr\_comport\_read\_data@{uatr\_comport\_read\_data}}
\index{uatr\_comport\_read\_data@{uatr\_comport\_read\_data}!uart-\/comport.c@{uart-\/comport.c}}
\doxysubsubsection{\texorpdfstring{uatr\_comport\_read\_data()}{uatr\_comport\_read\_data()}}
{\footnotesize\ttfamily void uatr\+\_\+comport\+\_\+read\+\_\+data (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

uatr\+\_\+comport\+\_\+read\+\_\+data is a function used to read data from Rx buffer to start\+\_\+speed and stop\+\_\+speed. \mbox{\Hypertarget{uart-comport_8c_a2cc441e72458643cd3d0d193f84277f3}\label{uart-comport_8c_a2cc441e72458643cd3d0d193f84277f3}} 
\index{uart-\/comport.c@{uart-\/comport.c}!uatr\_comport\_send\_data@{uatr\_comport\_send\_data}}
\index{uatr\_comport\_send\_data@{uatr\_comport\_send\_data}!uart-\/comport.c@{uart-\/comport.c}}
\doxysubsubsection{\texorpdfstring{uatr\_comport\_send\_data()}{uatr\_comport\_send\_data()}}
{\footnotesize\ttfamily void uatr\+\_\+comport\+\_\+send\+\_\+data (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{data,  }\item[{uint8\+\_\+t}]{data\+\_\+len }\end{DoxyParamCaption})}

uatr\+\_\+comport\+\_\+send\+\_\+data is a function used to send message to comport. It sends data in non-\/blocking mode. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em data} & is a pointer to sending data \\
\hline
\mbox{\texttt{ in}}  & {\em data\+\_\+len} & is length of data to send\\
\hline
\end{DoxyParams}
It should be placed inside\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void} \mbox{\hyperlink{main_8c_ae494a9643f29b87d6d81e5264e60e57b}{HAL\_UART\_RxCpltCallback}}(UART\_HandleTypeDef *huart)}
\DoxyCodeLine{\{}
\DoxyCodeLine{    \textcolor{keywordflow}{if}(huart == \&huart1) \mbox{\hyperlink{uart-comport_8c_a095104a7832f1ee7897ecab94c3b0256}{uatr\_comport\_read\_data}}();}
\DoxyCodeLine{\}}

\end{DoxyCode}
 

\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{uart-comport_8c_a1e883f39d56bb3dd769123f2b951e50d}\label{uart-comport_8c_a1e883f39d56bb3dd769123f2b951e50d}} 
\index{uart-\/comport.c@{uart-\/comport.c}!comand\_RX@{comand\_RX}}
\index{comand\_RX@{comand\_RX}!uart-\/comport.c@{uart-\/comport.c}}
\doxysubsubsection{\texorpdfstring{comand\_RX}{comand\_RX}}
{\footnotesize\ttfamily uint8\+\_\+t comand\+\_\+\+RX\mbox{[}COM\+\_\+\+LEN\mbox{]} =\{0\}\hspace{0.3cm}{\ttfamily [static]}}

UART Rx buffer \mbox{\Hypertarget{uart-comport_8c_a6b4bce936c510120447c9171f10a8b0f}\label{uart-comport_8c_a6b4bce936c510120447c9171f10a8b0f}} 
\index{uart-\/comport.c@{uart-\/comport.c}!DAV\_flag@{DAV\_flag}}
\index{DAV\_flag@{DAV\_flag}!uart-\/comport.c@{uart-\/comport.c}}
\doxysubsubsection{\texorpdfstring{DAV\_flag}{DAV\_flag}}
{\footnotesize\ttfamily bool DAV\+\_\+flag = false\hspace{0.3cm}{\ttfamily [static]}}

data valid flag. When true, uart\+\_\+comport\+\_\+task will triggered \mbox{\hyperlink{main_8c_acbfb668d7b4cfa39aa1a5a5dac3c0e7e}{task()}} function. \mbox{\Hypertarget{uart-comport_8c_af2e9ae4c4e3d4330f1ba90f690c1b6df}\label{uart-comport_8c_af2e9ae4c4e3d4330f1ba90f690c1b6df}} 
\index{uart-\/comport.c@{uart-\/comport.c}!uart\_Tx\_flag@{uart\_Tx\_flag}}
\index{uart\_Tx\_flag@{uart\_Tx\_flag}!uart-\/comport.c@{uart-\/comport.c}}
\doxysubsubsection{\texorpdfstring{uart\_Tx\_flag}{uart\_Tx\_flag}}
{\footnotesize\ttfamily uint8\+\_\+t uart\+\_\+\+Tx\+\_\+flag = 0}

UATR Tx transmission availability flag 